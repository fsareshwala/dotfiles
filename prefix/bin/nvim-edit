#!/usr/bin/env bash

# Edit the currently active textarea in vim:
#   - take the current text in the textarea
#   - load it in vim
#   - user completes their edits and closes vim
#   - replace the text area with the newly edited text

temp=$(mktemp)
trap "rm -rf $temp" EXIT

xdotool key --clearmodifiers --delay 100 ctrl+a
xclip -r -o -selection primary > $temp
urxvt -e nvim $temp
xclip -r -i -selection primary $temp
xdotool key --clearmodifiers shift+insert
